@model IEnumerable<Product>
@{
    ViewData["Title"] = "Index";
}

<h2>All Products</h2>

<div class="toy-list">
    @foreach (var product in Model)
    {
        var imagePath = Url.Content("~/images/" + product.ImageName);
        var starPath = Url.Content("~/images/" + Math.Round(product.AverageRating, 0) + "-star.png");

        <div class="toy">
            <a asp-controller="Products" asp-action="Detail" asp-route-id="@product.ProductId">
                <img class="product-image" src=@imagePath />
            </a>
            <div class="details">
                <h3>
                    @product.Name
                    @if (product.IsTopSeller)
                    {
                        <span class="best-seller">BEST SELLER!</span>
                    }
                </h3>
                <p class="manufacturer">by @product.Manufacturer</p>
                @if (product.RemainingStock < 5)
                {
                    <p class="alert-remaining">Only @product.RemainingStock left!</p>
                }
                <p class="price">@product.Price.ToString("C")</p>
                <p class="weight"><span class="bold">Weight</span> @product.WeightInLbs lbs</p>

                <img class="rating" src="@starPath" />


            </div>
            <hr />
        </div>

    }

</div>